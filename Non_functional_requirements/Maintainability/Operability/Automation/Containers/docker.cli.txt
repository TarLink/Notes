
            
   DOCKER   
            



                                             /=+===============================+=\ 
                                            /  :                               :  \  
                                            )==:         DOCKER ENGINE         :==(   
                                            \  :_______________________________:  /    
                                             \=+===============================+=/

VERSION ==>                       #1.12.2

docker deamon:
  - binds to Unix socket:
     - owned by "docker" group if it exists, "root" (avoid) otherwise

Start deaemon:
  - once: sudo service docker start
  - all the time: sudo systemctl enable docker

Memory and swap accouting:
  - must be enabled on the OS: performance impact, but better OS memory management
  - see online doc for how to enable it

IMAGE/CONTAINER ==>               #Image: stateless filesystem snapshot, with metadata
                                  #Container: running instance of an image
IMAGE                             #IMAGE from Docker Hub.
                                  #Pulled unless cached
                                  #Is REPO_USER/IMAGE_NAME[:TAG] (def TAG: latest)

/var/lib/docker/                  #Runtime directory for docker with notably:
                                  #  - containers/CONTAINER_ID/:
                                  #     - log files
                                  #     - config, including routing
                                  #  - images/

docker CLI

docker version                    #Prints current version

docker build DIR|URL              #Creates an IMAGE from a DIR with a Dockerfile inside
-f DOCKERFILE                     #Def: DIR/Dockerfile
-t TAG                            #

docker run IMAGE                  #Creates and run a container, using an image
 [COMMAND [ARGS...]]              #If specified, run COMMAND from within the container (otherwise, run default command)

docker images                     #Prints images with information:
                                  #  - IMAGE (repository)
                                  #  - repository tag
                                  #  - sha256 checksum (if --digests)
                                  #  - image ID (truncated unless --no-trunc)
                                  #  - ctime
                                  #  - size
-a
--all                             #Prints all (do not hide intermediate images)
-q
--quiet                           #Only show image ID

docker ps                         #Prints containers with information:
                                  #  - container ID (truncated unless --no-trunc)
                                  #  - container names
                                  #  - IMAGE name
                                  #  - IMAGE command
                                  #  - ctime
                                  #  - status: exited (+ status code, time)
                                  #  - ports
                                  #  - size (real, virtual): only if -s/--size
-a                                
--all                             #Prints all (not only currently running)
-n [INT]
--last [INT]
-l
--latest                          #Only prints INT (def: 1) latest ran
-q
--quiet                           #Only show container ID


                                             /=+===============================+=\ 
                                            /  :                               :  \  
                                            )==:          DOCKERFILE           :==(   
                                            \  :_______________________________:  /    
                                             \=+===============================+=/


FILESYSTEM ==>                    #/ is image root

/Dockerfile                       #Main configuration file, with following commands

FROM IMAGE                        #Pull another IMAGE

COMMAND                           #Means a CLI command, either:
                                  #  - same syntax as in a CLI
                                  #    Run with /bin/sh -c
                                  #  - as array of words ["STR",...]
                                  #    Run with exec, i.e. new environment

RUN COMMAND                       #Run command

ENTRYPOINT COMMAND                #If COMMAND uses:
                                  #  - array of words: like CMD
                                  #  - CLI syntax: sets default command, that can take args.

CMD COMMAND                       #If ENTRYPOINT was:
                                  #  - not called before: sets default command, that cannot take args. 
                                  #  - called before: sets default args.
                                  #Only last CMD will be used.

ENV VAR VAL                       #Sets ENVVAR


                                             /=+===============================+=\ 
                                            /  :                               :  \  
                                            )==:          DOCKER HUB           :==(   
                                            \  :_______________________________:  /    
                                             \=+===============================+=/


GOAL ==>                          #Repository of Docker images
