
         
   URI   
         


RFCs:
  - general: 3986 (stopped at section 3), 2141, 3305, 7320
  - i18n: 3987
  - namespaces: 3406, 3553
  - resolution: 2169, 2276, 2483
  - Same origin policy: 6454
  - templates: 6570
  - well known URI: 5785
  - examples: 6963
  - data URI: 2397 (including max size)
  - IPv6: 6874
  - OID: 3061
  - tel://: 3966
  - UUID: 4122
  - tag://: 4151
  - about://: 6694
  - CSV: 7111
  - format this doc
  - go back to HTTP doc

URI (Uniform Resource Identifier):
  - [SCHEME:][//[USERINFO@]HOSTNAME[:[PORT]]][PATH][?[QUERY]][#[HASH]]
     - format depends on SCHEME and AUTHORITY
     - USERINFO:
        - should avoid plaintext like USER:PASSWORD
     - PATH:
        - / imply hierarchy
        - when AUTHORITY and PATH both present, must be separated by /
        - can use . or ..
     - HASH: specific part of resource
     - QUERY: 
        - can be any syntax, but usually ?VAR=VAL&...
     - HOSTNAME: 
        - can be other things too, e.g. IP address (for IP protocols)
        - max length 255 bytes
     - AUTHORITY: USERINFOUSERINFO+HOSTNAME+PORT
     - charset: 
        - not permitted characters: percent-encoding (also known as "URL encoding") UTF-8 byte value
        - permitted characters (beyond delimiters defined above):
            SCHEME USERINFO HOSTNAME PORT PATH QUERY HASH    [:alnum:] - .
                   USERINFO HOSTNAME PORT PATH QUERY HASH    _ ~
            SCHEME USERINFO HOSTNAME      PATH QUERY HASH    +
                   USERINFO HOSTNAME      PATH QUERY HASH    ! $ & ' ( ) * + , ; =
                   USERINFO                    PATH QUERY HASH.   :
                                               PATH QUERY HASH    @
                                                    QUERY HASH    / ?
     - case:
        - SCHEME, HOSTNAME: case-insensitive, lowercase recommended
        - rest: depends on SCHEME and AUTHORITY
     - max length: depends on URI scheme, but recommmends 255 bytes
     - relative:
        - when SCHEME: is ommitted
        - relative to another URI2
        - if URI:
           - empty: same as URI2
           - URI: relative to SCHEME2://AUTHORITY2/PATH2/
           - /URI: relative to SCHEME2://AUTHORITY2/
         hierarchy
   : relative to SCHEME2:
  - resource identity:
     - whether RESOURCE == RESOURCE2
        - changes (formats, encoding, etc.)
        - versions
     - depends on URI scheme
  - cardinality:
     - sameness (required): 
        - different requests to same URI cannot return different resources 
        - at different places (global namespace) or times
        - global namespace:
           - points to same resource in any network, but resource might be available or not depending on network
           - sometimes the context is part of the resource itself, e.g.:
              - file:
              - http://localhost
              - time-based protocols
           - implies central authorities:
              - URN NAMESPACE are registered to IANA
              - URL:
                 - HOST IP and domain names are delegated to providers registered to IANA
                 - PATH is responsibility of server
     - no ambiguity (required): 
        - one request to 1 URI cannot return many resources at once
     - uniqueness (optional): 
        - cannot bind duplicate URIs to 1 resource
        - depends on URI identity:
           - whether URI == URI2
           - normalization:
              - safe:
                 - lowercase SCHEME, HOST
                 - uppercase %-encoded chars
                 - %-decode chars that do not need to be
                 - removing parts that equal default value (e.g. PORT or filename)
                 - resolving . and ..
              - unsafe:
                 - add trailing /
                 - remove duplicate /
                 - sorting QUERY
                 - removing unused parts
                 - removing ? when no QUERY
                 - remove #HASH
                 - replace with equivalent SCHEME (e.g. http -> https)
                 - URI scheme specific translations
                 (HTTP only)
                 - prepend www. to HOST
                 (IP only)
                 - IP -> hostname
        - usign several URIs for 1 resource:
           - canonical URI: 
              - the one which has priority
              - with URLs, others might redirect to canonical URL
           - short URI: smaller size than others
  - can describe (not exclusive to each other):
     - identity:
        - resource ID, regardless of location:
        - long-term persistent
        - resolution:
           - translating into location/metadata
           - example: Handle System
        - example: URN, DOI
     - location:
        - address where a resource might be located
        - called URL (Uniform Resource Locator)
        - must use one|several network protocols|algorithm:
           - URI scheme does not always equate protocol, e.g. data: or file:
        - transient
           - if persistent: permalink or PURL (permanent URL)
              - redirect to transient URL
           - rotten|dead|broken link:
              - when location does not reference to the resource anymore
     - content (including hash)
     - metadata:
        - e.g.: URLs, owner, access restrictions, encoding
        - transient
        - example: URC, RDF
  - content:
     - can be opaque/unreflective or transparent/reflective: 
        - whether URL describes content|metadata
     - semantic/clean/RESTful URL:
        - resource name should be abstract and not infer implementation:
           - resource names instead of file|script name
              - using slugs, i.e. short [[:alpha:][:lower:]-]
           - instead of query variables:
              - PATH parts
              - file extension (for resource format)
           - often only use several /RESOURCE and /ID
        - goals:
           - accessibility
           - separation of concerns, e.g. does not need to change URL when implementation changes
  - specific URI schemes:
     - urn (Uniform Resource Name):
        - urn:NAMESPACE:ID (i.e. SCHEME:PATH)
        - example of NAMESPACE: isbn, nbn, isan (movies), issn (journal), ietf:rtc, mpeg (MPEG subformats), oid, uuid, lex (law)
     - DOI:
        - doi:NAMESPACE/ID
        - used for publishing, journals
        - resolved by http://dx.doi.org/NAMESPACE/ID (using Handle System) to location/metadata
     - urc (Uniform Resource Characteristics): 
        - never implemented
     - file:
        - local files
        - HOST is file://[localhost]/PATH
     - data URI:
        - "data:[MIMETYPE];base64,CODE":
           - CODE: data encoded in base64 (e.g. using WINDOW.btoa|atob())
              - base64 discard whitespaces
           - def MIMETYPE: text/plain
        - "data:[MIMETYPE];charset=utf-8,CODE":
           - CODE: data URI encoded (e.g. with encode|decodeURIComponent())
  - security: see web security doc
