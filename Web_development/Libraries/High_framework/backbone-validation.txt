
                         
   BACKBONE-VALIDATION   
                         


VERSION ==>                       #0.11.5
Backbone.Validation               #VALIDATION, client-side
require("backbone-validation")    #VALIDATION, server-side (Node)

MODEL.validation                  #VAL_OBJ[()], where VAL_OBJ is { VARR: RULE }, where RULE:
                                  #  - specifies schema for _.get(MODEL, VARR)
                                  #  - can be:
                                  #     - OBJ[_ARR]:
                                  #        - msg "ERROR"[()]: otherwise use default error messages
                                  #        - fn(VAL, "VARR")->true|"ERROR"
                                  #        - required BOOL (def: true)
                                  #        - acceptance BOOL: === true|'true'
                                  #        - min|max NUM
                                  #        - range [ MIN, MAX ]
                                  #        - length|minLength|maxLength NUM
                                  #        - rangeLength [ MIN, MAX ]
                                  #        - equalTo VAL
                                  #        - oneOf VAL_ARR
                                  #        - pattern REGEXP|STR, among "number|email|url|digits"
                                  #     - FUNC: same as { fn FUNC }
                                  #FUNC above can also be "FUNC", i.e. MODEL.FUNC
                                  #Can access builtin validator with VALIDATOR.validators.FUNC(...)
                                  #Can add|overwrite OBJ.VAR with:
                                  #  _.extend(VALIDATION.validators, { VAR: FUNC(VAL, "VARR", VAL2, MODEL, ATTR_OBJ)->BOOL|"ERROR" })
                                  #  where VAL2 is the one specified in MODEL.validation.VAR VAL2
                                  #Can add|overwrite pattern STR with:
                                  #  _.extend(VALIDATION.patterns, { STR: REGEXP } )
                                  #  _.extend(VALIDATION.messages, { STR: "ERROR" } )
                                  #Can modify default error messages with:
                                  #  _.extend(VALIDATION.messages, { STR: "ERROR" } ), where "ERROR" can contain:
                                  #    - "{0}": formatted "VARR"
                                  #    - "{1|2}": MIN|MAX
VALIDATION.[un]bind(VIEW[, OBJ])  #Sets/overrides MODEL properties:
                                  #  - validate():
                                  #     - fires events:
                                  #        - validated(BOOL, MODEL, OBJ_ARR), where OBJ_ARR { "VARR": "ERROR" }
                                  #        - validated:[in]valid(MODEL, OBJ_ARR)
                                  #     - if invalid, returns ERROR[_STR], making MODEL.set|save|fetch() stop and firing
                                  #       "invalid" event, unless OBJ.forceUpdate true (def: false)
                                  #  - isValid([VAL])->BOOL, where VAL can be:
                                  #     - "VARR"[_ARR]: checks ATTR_OBJ.VARR
                                  #     - true: checks all, triggering MODEL.validate()
                                  #     - undefined: according to last MODEL.validate() 
                                  #  - preValidate({ VARR: VAL }) or ("VARR", VAL): same as isValid() but running after an
                                  #    hypothetical MODEL.set(...)
                                  #  - MODEL event invalid(MODEL, { VARR: "ERROR" ... }, OBJ2), also fired by isValid()
                                  #MODEL:
                                  #  - is VIEW|OBJ.model
                                  #  - if VIEW|OBJ.collection COLL, do it on each children MODEL, including new ones 
                                  #    (by listening to COLL event)
                                  #OBJ:
                                  #  - [in]valid(): called by isValid|validate()
                                  #  - invalid(VIEW, "VARR", ERROR, SELECTOR): by def, adds OBJ.selector="invalid" and
                                  #    data-error="ERROR" to VIEW.$('[ATTR~="VARR"]')
                                  #      - ATTR is OBJ.selector (def: "name")
                                  #  - valid(VIEW, "VARR", SELECTOR): by def. do the inverse
                                  #  - forceUpdate BOOL: if true (def: false), does not trigger error event anymore, and let
                                  #    MODEL.set|save|fetch() work even if not valid???
                                  #     - can be also on MODEL.set|save|fetch() OBJ2.forceUpdate
                                  #  - labelFormatter STR, how "VARR" is displayed in error messages???:
                                  #     - "none": does nothing
                                  #     - "sentenceCase" (def): aaBB|aa_bb -> "Aa bb"
                                  #     - "label": use MODEL.labels.VARR
                                  #  - attributes "VARR"_ARR[(VIEW)]|"FUNC":
                                  #     - restrict isValid() and validate() to MODEL.VARR
                                  #     - "FUNC" use VALIDATION.attributeLoaders.FUNC(VIEW)->"VARR"_ARR. Only def "FUNC" is:
                                  #        - "inputNames": VIEW input|select|textarea (with a form ancestor) name HTML attribute
                                  #Must be called after MODEL initialized, e.g. VIEW.initialize() or onBeforeRender()
                                  #OBJ.model|collection (def: VIEW.model|collection)
                                  #unbind() should be called in VIEW.destroy()
_.extend
(MODEL.prototype,VALIDATION.mixin)#Same as VALIDATION.bind() but with MODEL and no VIEW (for server-side or tests)

DEFAULT VALUES ==>                #Must _.extend(OBJ2, OBJ), where OBJ2 is:
                                  #  - VALIDATION.defaultOptions: for VALIDATION.bind() OBJ
                                  #     - can also do VALIDATION.configure(OBJ)
                                  #  - VALIDATION.callbacks: for OBJ2.[in]valid
                                  #  - VALIDATION.attributeLoaders: see above
